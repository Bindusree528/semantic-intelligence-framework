{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../app/login/page.tsx","../../../../app/%28app%29/lib/api.js"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","'use client'\n\nimport { useState } from 'react'\nimport Link from 'next/link'\nimport { useRouter } from 'next/navigation'\nimport { login } from \"@/app/(app)/lib/api\";\n\nexport default function LoginPage() {\n  const router = useRouter()\n  const [username, setUsername] = useState(\"\")   // using username instead of email\n  const [password, setPassword] = useState(\"\")\n  const [error, setError] = useState(\"\")\n  const [loading, setLoading] = useState(false)\n\n  const handleSubmit = async (e: React.FormEvent) => {\n  e.preventDefault();\n  setLoading(true);\n  setError(\"\");\n\n  try {\n    const resp = await login({ username, password });\n    // backend returns { access_token, token_type }\n    const token = resp.access_token || resp.token || resp.jwt;\n    if (!token) throw new Error(\"No token in response\");\n    localStorage.setItem(\"token\", token);\n    // optional: store under known key\n    router.push(\"/dashboard\");\n  } catch (err: any) {\n    setError(err?.detail || err?.message || \"Invalid username or password\");\n  } finally {\n    setLoading(false);\n  }\n};\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-4\">\n      <div className=\"w-full max-w-md\">\n\n        {/* Logo Section */}\n        <div className=\"text-center mb-12\">\n          <div className=\"text-4xl font-bold text-primary mb-2\">KMRL</div>\n          <p className=\"text-foreground/60\">Document Intelligence System</p>\n          <p className=\"text-sm text-muted-foreground mt-2\">Metro Operations & Management</p>\n        </div>\n\n        {/* Login Card */}\n        <div className=\"bg-card border border-border rounded-xl shadow-lg p-8\">\n          <h1 className=\"text-2xl font-bold text-card-foreground mb-2\">Welcome</h1>\n          <p className=\"text-muted-foreground mb-8\">Sign in to your account</p>\n\n          {error && (\n            <div className=\"mb-6 p-4 bg-destructive/10 border border-destructive/20 rounded-lg text-destructive text-sm\">\n              {error}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-5\">\n            \n            {/* Username Field */}\n            <div>\n              <label className=\"block text-sm font-medium text-card-foreground mb-2\">\n                Username\n              </label>\n              <div className=\"relative\">\n                <span className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\">ðŸ‘¤</span>\n                <input\n                  type=\"text\"\n                  value={username}\n                  onChange={(e) => setUsername(e.target.value)}\n                  placeholder=\"Enter username\"\n                  className=\"w-full pl-10 pr-4 py-3 rounded-lg bg-background border border-border text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition\"\n                />\n              </div>\n            </div>\n\n            {/* Password Field */}\n            <div>\n              <label className=\"block text-sm font-medium text-card-foreground mb-2\">\n                Password\n              </label>\n              <div className=\"relative\">\n                <span className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground\">ðŸ”’</span>\n                <input\n                  type=\"password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  placeholder=\"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\"\n                  className=\"w-full pl-10 pr-4 py-3 rounded-lg bg-background border border-border text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition\"\n                />\n              </div>\n            </div>\n\n            {/* Remember & Forgot */}\n            <div className=\"flex items-center justify-between text-sm\">\n              <label className=\"flex items-center gap-2 cursor-pointer\">\n                <input type=\"checkbox\" className=\"rounded border-border\" />\n                <span className=\"text-muted-foreground\">Remember me</span>\n              </label>\n              <Link href=\"/forgot-password\" className=\"text-primary hover:text-primary/80 font-medium\">\n                Forgot password?\n              </Link>\n            </div>\n\n            {/* Submit Button */}\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full py-3 px-4 bg-primary text-primary-foreground font-medium rounded-lg hover:bg-primary/90 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n            >\n              {loading ? (\n                <>\n                  <div className=\"w-4 h-4 border-2 border-primary-foreground/30 border-t-primary-foreground rounded-full animate-spin\" />\n                  Signing in...\n                </>\n              ) : (\n                'Sign In'\n              )}\n            </button>\n          </form>\n\n          <div className=\"mt-6 pt-6 border-t border-border\">\n            <p className=\"text-xs text-muted-foreground text-center\">\n              Enter valid username & password to login.\n            </p>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <p className=\"text-center text-sm text-muted-foreground mt-8\">\n          Â© 2025 KMRL. All rights reserved.\n        </p>\n      </div>\n    </div>\n  )\n}\n","// app/(app)/lib/api.js\r\nconst API_BASE = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8000\";\r\n\r\nasync function postForm(path, formObj) {\r\n  const body = new URLSearchParams(formObj).toString();\r\n  const res = await fetch(`${API_BASE}${path}`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n      Accept: \"application/json\",\r\n    },\r\n    body,\r\n  });\r\n  const json = await res.json();\r\n  if (!res.ok) throw json;\r\n  return json;\r\n}\r\n\r\nexport async function login({ username, password }) {\r\n  // OAuth2 password form fields\r\n  return postForm(\"/auth/login\", {\r\n    grant_type: \"password\",\r\n    username,\r\n    password,\r\n    scope: \"\",\r\n    client_id: \"\",\r\n    client_secret: \"\",\r\n  });\r\n}\r\n\r\nexport function authFetch(path, opts = {}) {\r\n  const token = typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null;\r\n  const headers = opts.headers || {};\r\n  if (token) headers[\"Authorization\"] = `Bearer ${token}`;\r\n  return fetch(`${API_BASE}${path}`, { ...opts, headers });\r\n}\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime","React","AppRouterContext","ReactServerDOMTurbopackClient"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6]}